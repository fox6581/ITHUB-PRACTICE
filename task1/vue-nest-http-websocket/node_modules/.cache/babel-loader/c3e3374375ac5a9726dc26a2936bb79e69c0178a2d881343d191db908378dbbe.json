{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  data() {\n    return {\n      url: 'http://localhost:3000/api',\n      // Замените на ваш URL сервера\n      httpResponses: [],\n      wsMessage: '',\n      wsMessages: [],\n      socket: null // Добавляем переменную для хранения WebSocket соединения\n    };\n  },\n\n  created() {\n    // Инициализация WebSocket и обработчика ошибок\n    this.initWebSocket();\n  },\n  methods: {\n    async sendHttpRequest() {\n      try {\n        const response = await fetch(this.url);\n        const data = await response.text();\n        this.httpResponses.push(data);\n      } catch (error) {\n        console.error(error);\n      }\n    },\n    initWebSocket() {\n      // Инициализация WebSocket и обработчика ошибок\n\n      const socket = new WebSocket('ws://localhost:3000/api');\n\n      // Обработчик ошибок WebSocket\n      socket.addEventListener('error', event => {\n        console.error('Произошла ошибка:', event);\n      });\n\n      // Обработчик события открытия соединения\n      socket.addEventListener('open', event => {\n        console.log('WebSocket соединение установлено:', event);\n      });\n\n      // Обработчик события приема сообщения\n      socket.addEventListener('message', event => {\n        console.log('Получено сообщение:', event.data);\n        this.wsMessages.push(event.data); // Сохраняем полученное сообщение\n      });\n\n      // Обработчик события закрытия соединения\n      socket.addEventListener('close', event => {\n        console.log('WebSocket соединение закрыто:', event);\n      });\n      this.socket = socket; // Сохраняем соединение в состоянии компонента\n    },\n\n    sendWebSocketMessage() {\n      // Отправка сообщения через WebSocket\n      if (this.socket && this.socket.readyState === WebSocket.OPEN) {\n        this.socket.send(this.wsMessage);\n        this.wsMessage = ''; // Очищаем поле ввода сообщения\n      } else {\n        console.error('WebSocket соединение не установлено или закрыто.');\n      }\n    }\n  }\n};","map":{"version":3,"names":["data","url","httpResponses","wsMessage","wsMessages","socket","created","initWebSocket","methods","sendHttpRequest","response","fetch","text","push","error","console","WebSocket","addEventListener","event","log","sendWebSocketMessage","readyState","OPEN","send"],"sources":["C:\\std\\vue-nest-http-websocket\\src\\components\\HttpClient.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <!-- Форма для отправки HTTP-запросов -->\r\n    <form @submit.prevent=\"sendHttpRequest\">\r\n      <input v-model=\"url\" type=\"text\" placeholder=\"URL\">\r\n      <button type=\"submit\">Отправить HTTP-запрос</button>\r\n    </form>\r\n    <!-- Вывод результатов HTTP-запросов -->\r\n    <div>\r\n      <h2>Результаты HTTP-запросов:</h2>\r\n      <div v-for=\"(response, index) in httpResponses\" :key=\"index\">\r\n        <p>{{ response }}</p>\r\n      </div>\r\n    </div>\r\n    <!-- WebSocket-клиент -->\r\n    <div>\r\n      <h2>WebSocket-клиент:</h2>\r\n      <input v-model=\"wsMessage\" type=\"text\" placeholder=\"WebSocket сообщение\">\r\n      <button @click=\"sendWebSocketMessage\">Отправить WebSocket сообщение</button>\r\n      <div v-for=\"(message, index) in wsMessages\" :key=\"index\">\r\n        <p>{{ message }}</p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      url: 'http://localhost:3000/api', // Замените на ваш URL сервера\r\n      httpResponses: [],\r\n      wsMessage: '',\r\n      wsMessages: [],\r\n      socket: null, // Добавляем переменную для хранения WebSocket соединения\r\n    };\r\n  },\r\n  created() {\r\n    // Инициализация WebSocket и обработчика ошибок\r\n    this.initWebSocket();\r\n  },\r\n  methods: {\r\n    async sendHttpRequest() {\r\n      try {\r\n        const response = await fetch(this.url);\r\n        const data = await response.text();\r\n        this.httpResponses.push(data);\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    },\r\n    initWebSocket() {\r\n      // Инициализация WebSocket и обработчика ошибок\r\n      \r\n      const socket = new WebSocket('ws://localhost:3000/api'); \r\n\r\n      // Обработчик ошибок WebSocket\r\n      socket.addEventListener('error', (event) => {\r\n        console.error('Произошла ошибка:', event);\r\n      });\r\n\r\n      // Обработчик события открытия соединения\r\n      socket.addEventListener('open', (event) => {\r\n        console.log('WebSocket соединение установлено:', event);\r\n      });\r\n\r\n      // Обработчик события приема сообщения\r\n      socket.addEventListener('message', (event) => {\r\n        console.log('Получено сообщение:', event.data);\r\n        this.wsMessages.push(event.data); // Сохраняем полученное сообщение\r\n      });\r\n\r\n      // Обработчик события закрытия соединения\r\n      socket.addEventListener('close', (event) => {\r\n        console.log('WebSocket соединение закрыто:', event);\r\n      });\r\n    \r\n      this.socket = socket; // Сохраняем соединение в состоянии компонента\r\n      \r\n    },\r\n    sendWebSocketMessage() {\r\n      // Отправка сообщения через WebSocket\r\n      if (this.socket && this.socket.readyState === WebSocket.OPEN) {\r\n        this.socket.send(this.wsMessage);\r\n        this.wsMessage = ''; // Очищаем поле ввода сообщения\r\n      } else {\r\n        console.error('WebSocket соединение не установлено или закрыто.');\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n"],"mappings":";AA2BA,eAAe;EACbA,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,GAAG,EAAE,2BAA2B;MAAE;MAClCC,aAAa,EAAE,EAAE;MACjBC,SAAS,EAAE,EAAE;MACbC,UAAU,EAAE,EAAE;MACdC,MAAM,EAAE,IAAI,CAAE;IAChB,CAAC;EACH,CAAC;;EACDC,OAAOA,CAAA,EAAG;IACR;IACA,IAAI,CAACC,aAAa,CAAC,CAAC;EACtB,CAAC;EACDC,OAAO,EAAE;IACP,MAAMC,eAAeA,CAAA,EAAG;MACtB,IAAI;QACF,MAAMC,QAAO,GAAI,MAAMC,KAAK,CAAC,IAAI,CAACV,GAAG,CAAC;QACtC,MAAMD,IAAG,GAAI,MAAMU,QAAQ,CAACE,IAAI,CAAC,CAAC;QAClC,IAAI,CAACV,aAAa,CAACW,IAAI,CAACb,IAAI,CAAC;MAC/B,EAAE,OAAOc,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;MACtB;IACF,CAAC;IACDP,aAAaA,CAAA,EAAG;MACd;;MAEA,MAAMF,MAAK,GAAI,IAAIW,SAAS,CAAC,yBAAyB,CAAC;;MAEvD;MACAX,MAAM,CAACY,gBAAgB,CAAC,OAAO,EAAGC,KAAK,IAAK;QAC1CH,OAAO,CAACD,KAAK,CAAC,mBAAmB,EAAEI,KAAK,CAAC;MAC3C,CAAC,CAAC;;MAEF;MACAb,MAAM,CAACY,gBAAgB,CAAC,MAAM,EAAGC,KAAK,IAAK;QACzCH,OAAO,CAACI,GAAG,CAAC,mCAAmC,EAAED,KAAK,CAAC;MACzD,CAAC,CAAC;;MAEF;MACAb,MAAM,CAACY,gBAAgB,CAAC,SAAS,EAAGC,KAAK,IAAK;QAC5CH,OAAO,CAACI,GAAG,CAAC,qBAAqB,EAAED,KAAK,CAAClB,IAAI,CAAC;QAC9C,IAAI,CAACI,UAAU,CAACS,IAAI,CAACK,KAAK,CAAClB,IAAI,CAAC,EAAE;MACpC,CAAC,CAAC;;MAEF;MACAK,MAAM,CAACY,gBAAgB,CAAC,OAAO,EAAGC,KAAK,IAAK;QAC1CH,OAAO,CAACI,GAAG,CAAC,+BAA+B,EAAED,KAAK,CAAC;MACrD,CAAC,CAAC;MAEF,IAAI,CAACb,MAAK,GAAIA,MAAM,EAAE;IAExB,CAAC;;IACDe,oBAAoBA,CAAA,EAAG;MACrB;MACA,IAAI,IAAI,CAACf,MAAK,IAAK,IAAI,CAACA,MAAM,CAACgB,UAAS,KAAML,SAAS,CAACM,IAAI,EAAE;QAC5D,IAAI,CAACjB,MAAM,CAACkB,IAAI,CAAC,IAAI,CAACpB,SAAS,CAAC;QAChC,IAAI,CAACA,SAAQ,GAAI,EAAE,EAAE;MACvB,OAAO;QACLY,OAAO,CAACD,KAAK,CAAC,kDAAkD,CAAC;MACnE;IACF;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}